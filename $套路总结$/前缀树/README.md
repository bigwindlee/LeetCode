|LeetCode|要点|
|--------------------------------|--------------------------------|
|[642. 设计搜索自动补全系统][github-leetcode-0642]|前缀树：通过 Trie 来存储历史输入的句子，并根据前缀匹配提供最热门的补全建议。|



### 什么是前缀树？

**前缀树**（Trie，又称字典树）是一种用于高效存储和检索字符串集合的数据结构。其基本思想是将字符串按照字符逐个存储在树的节点上，不同字符串的相同前缀部分共享相同的路径，从而节省存储空间，并提供快速的查找效率。

**Trie** 的每个节点通常代表一个字符，根节点为空，树的每一条路径代表一个字符串的前缀。通过这种方式，Trie 能够高效地执行前缀查询、字符串插入和字符串查找操作。

### 前缀树的基本结构

1. **根节点**：前缀树的根节点通常不代表任何字符。
2. **内部节点**：每个内部节点表示某个字符。
3. **终止标记**：为了区分不同长度的字符串，通常需要在节点中标记某个字符串是否在该节点结束（即字符串的末尾）。

例如，插入字符串 `"apple"` 和 `"app"` 后，Trie 可能的结构如下：
```
    (root)
    /  
  a
  |
  p
  |
  p (终止标记)
  |
  l
  |
  e (终止标记)
```


在该结构中，`"app"` 和 `"apple"` 共享相同的前缀 `a-p-p`，但在节点 `p` 标记 `"app"` 为一个完整的字符串，同时继续扩展到 `l-e` 来形成 `"apple"`。

### 前缀树适合解决什么样的问题？

前缀树特别适合于处理与字符串相关的问题，尤其是涉及 **前缀匹配** 的场景。常见的应用包括：

1. **前缀匹配**：给定一个字符串前缀，查找所有以该前缀开头的字符串。例如，自动补全功能（Autocomplete）。
   
2. **快速检索**：在大量字符串中，快速查找某个字符串是否存在，或者找到以某个前缀开头的所有字符串。

3. **单词统计**：前缀树可以帮助统计某个字符串的出现次数或前缀的出现次数。例如，拼写检查器（Spell Checker）可以利用前缀树高效地判断拼写是否正确。

4. **去重**：前缀树可以在插入字符串时自动去除重复，因为相同的字符串会共享路径，避免重复存储。

### LeetCode 中和前缀树相关的问题

以下是一些典型的 LeetCode 题目，它们利用了前缀树来实现高效的解决方案：

1. **[LeetCode 208. 实现 Trie (前缀树)](https://leetcode.com/problems/implement-trie-prefix-tree/)**  
   题目要求实现一个 Trie，支持插入字符串、查找字符串以及查找前缀。

2. **[LeetCode 211. 添加与搜索单词 - 数据结构设计](https://leetcode.com/problems/add-and-search-word-data-structure-design/)**  
   在该题中，需要设计一个支持单词插入和单词查找的数据结构，查找时可以包含通配符 `.`，该题可以通过 Trie 来实现。

3. **[LeetCode 212. 单词搜索 II](https://leetcode.com/problems/word-search-ii/)**  
   题目要求在一个二维字符网格中找到所有的单词。可以通过构建一个 Trie 来存储所有的单词，然后使用深度优先搜索（DFS）结合 Trie 进行快速匹配。

4. **[LeetCode 648. 单词替换](https://leetcode.com/problems/replace-words/)**  
   题目要求用一个词典中的“根”替换句子中的单词，可以通过 Trie 来存储词典中的“根”，并在遍历句子时快速查找替换的词根。

5. **[LeetCode 677. 键值映射](https://leetcode.com/problems/map-sum-pairs/)**  
   实现一个支持键值对插入和前缀求和的数据结构。Trie 可以高效地存储字符串并进行前缀求和。

6. **[LeetCode 642. 设计搜索自动补全系统](https://leetcode.com/problems/design-search-autocomplete-system/)**  
   该题要求设计一个自动补全系统，通过 Trie 来存储历史输入的句子，并根据前缀匹配提供最热门的补全建议。

7. **[LeetCode 1268. 搜索推荐系统](https://leetcode.com/problems/search-suggestions-system/)**  
   题目要求根据输入的字符提供商品推荐，可以通过 Trie 来存储所有商品名称，并在每次输入时通过前缀匹配提供推荐。

8. **[LeetCode 472. 连接词](https://leetcode.com/problems/concatenated-words/)**  
   该题要求找到由其他单词组成的连接词，可以使用 Trie 来存储词典，并通过递归和动态规划结合前缀树来查找连接词。

### 总结

- **前缀树（Trie）** 是一种高效的字符串存储和检索的数据结构，尤其擅长前缀匹配、字符串查找、自动补全等问题。
- 前缀树适合解决的问题主要包括：前缀匹配、快速字符串检索、多单词统计与管理等。
- 在 LeetCode 中，有很多问题都可以通过前缀树来高效解决，尤其是涉及字符串的查询、插入和前缀匹配的场景。



[github-leetcode-0642]: ../../0642.%20Design%20Search%20Autocomplete%20System/0642_AutocompleteSystem.h
